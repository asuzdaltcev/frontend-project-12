# Тестирование регистрации пользователей

## Обзор функциональности

Реализована полная система регистрации новых пользователей с валидацией и обработкой ошибок.

## Компоненты

### 1. Страница регистрации (`/signup`)
- **Файл**: `frontend/src/pages/Signup.jsx`
- **Функции**:
  - Форма регистрации с полями: имя пользователя, пароль, подтверждение пароля
  - Валидация на клиенте с помощью Yup
  - Обработка ошибок сервера (409 - пользователь уже существует)
  - Автоматический редирект на чат после успешной регистрации

### 2. Обновленная навигация
- **Файл**: `frontend/src/components/Navigation.jsx`
- **Изменения**:
  - Брендинг изменен на "Hexlet Chat"
  - Добавлена кнопка "Выйти" для авторизованных пользователей
  - Добавлена ссылка "Регистрация" для неавторизованных пользователей
  - Условное отображение элементов навигации

### 3. Обновленная страница входа
- **Файл**: `frontend/src/pages/Login.jsx`
- **Добавлено**: Ссылка на страницу регистрации

## Валидация

### Клиентская валидация (Yup)
```javascript
const validationSchema = Yup.object({
  username: Yup.string()
    .min(3, 'Имя пользователя должно содержать минимум 3 символа')
    .max(20, 'Имя пользователя не должно превышать 20 символов')
    .required('Имя пользователя обязательно'),
  password: Yup.string()
    .min(6, 'Пароль должен содержать минимум 6 символов')
    .required('Пароль обязателен'),
  confirmPassword: Yup.string()
    .oneOf([Yup.ref('password'), null], 'Пароли должны совпадать')
    .required('Подтверждение пароля обязательно'),
});
```

### Серверная валидация
- **409 Conflict**: Пользователь с таким именем уже существует
- **400 Bad Request**: Ошибка валидации данных

## Тестирование

### 1. Базовая регистрация
1. Откройте `/signup`
2. Заполните форму валидными данными:
   - Имя пользователя: `testuser` (3-20 символов)
   - Пароль: `password123` (минимум 6 символов)
   - Подтверждение пароля: `password123`
3. Нажмите "Зарегистрироваться"
4. **Ожидаемый результат**: Редирект на главную страницу чата

### 2. Валидация имени пользователя
1. Попробуйте зарегистрироваться с именем `ab` (менее 3 символов)
2. **Ожидаемый результат**: Ошибка "Имя пользователя должно содержать минимум 3 символа"

3. Попробуйте зарегистрироваться с именем длиннее 20 символов
4. **Ожидаемый результат**: Ошибка "Имя пользователя не должно превышать 20 символов"

### 3. Валидация пароля
1. Попробуйте зарегистрироваться с паролем `12345` (менее 6 символов)
2. **Ожидаемый результат**: Ошибка "Пароль должен содержать минимум 6 символов"

### 4. Подтверждение пароля
1. Введите разные пароли в поля "Пароль" и "Подтверждение пароля"
2. **Ожидаемый результат**: Ошибка "Пароли должны совпадать"

### 5. Дублирование пользователя
1. Зарегистрируйте пользователя с именем `testuser`
2. Попробуйте зарегистрировать еще одного пользователя с тем же именем
3. **Ожидаемый результат**: Ошибка "Пользователь с таким именем уже существует"

### 6. Навигация
1. **Неавторизованный пользователь**:
   - Должен видеть ссылки "Войти" и "Регистрация"
   - Бренд "Hexlet Chat" должен вести на главную страницу

2. **Авторизованный пользователь**:
   - Должен видеть ссылку "Главная" и кнопку "Выйти"
   - При нажатии "Выйти" должен происходить разлогин и редирект на `/login`

### 7. Ссылки между страницами
1. На странице входа должна быть ссылка "Зарегистрироваться"
2. На странице регистрации должна быть ссылка "Войти"
3. **Ожидаемый результат**: Корректная навигация между страницами

## API Endpoints

### Регистрация
- **URL**: `POST /api/v1/signup`
- **Body**: 
  ```json
  {
    "username": "string",
    "password": "string"
  }
  ```
- **Успешный ответ** (200):
  ```json
  {
    "token": "jwt_token",
    "username": "username"
  }
  ```
- **Ошибки**:
  - 409: Пользователь уже существует
  - 400: Ошибка валидации

## Безопасность

1. **Пароли**: Минимум 6 символов
2. **Имена пользователей**: 3-20 символов, уникальные
3. **JWT токены**: Сохраняются в localStorage
4. **Валидация**: Двойная (клиент + сервер)

## Состояние приложения

После успешной регистрации:
- JWT токен сохраняется в localStorage
- Имя пользователя сохраняется в localStorage
- Происходит редирект на главную страницу
- Пользователь считается авторизованным

## Возможные улучшения

1. Добавить индикатор силы пароля
2. Реализовать подтверждение email
3. Добавить капчу для защиты от ботов
4. Реализовать восстановление пароля
5. Добавить аватары пользователей 